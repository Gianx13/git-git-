<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Campo Minado</title>
  <style>
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      background-color: #222;
      color: #fff;
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    table {
      border-collapse: collapse;
    }
    td {
      width: 30px;
      height: 30px;
      text-align: center;
      vertical-align: middle;
      border: 2px solid #555;
      cursor: pointer;
      font-weight: bold;
      font-size: 18px;
      background-color: #333;
    }
    td.revealed {
      background-color: #999;
      cursor: default;
    }
    td.mine {
      background-color: red;
    }
    #resetBtn {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      border-radius: 5px;
      border: none;
      background-color: gold;
      color: black;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>Campo Minado</h1>
  <table id="board"></table>
  <button id="resetBtn">Reiniciar</button>

  <script>
    const rows = 8;
    const cols = 8;
    const minesCount = 10;
    let board = [];

    const boardEl = document.getElementById('board');
    const resetBtn = document.getElementById('resetBtn');

    function initBoard() {
      board = [];
      boardEl.innerHTML = '';

      // Criar board vazio
      for(let r = 0; r < rows; r++){
        const row = [];
        const tr = document.createElement('tr');
        for(let c = 0; c < cols; c++){
          const cell = {
            mine: false,
            revealed: false,
            adjacent: 0,
            element: document.createElement('td')
          };
          cell.element.addEventListener('click', () => reveal(r, c));
          tr.appendChild(cell.element);
          row.push(cell);
        }
        boardEl.appendChild(tr);
        board.push(row);
      }

      // Colocar minas
      let placed = 0;
      while(placed < minesCount){
        let r = Math.floor(Math.random() * rows);
        let c = Math.floor(Math.random() * cols);
        if(!board[r][c].mine){
          board[r][c].mine = true;
          placed++;
        }
      }

      // Calcular números adjacentes
      for(let r = 0; r < rows; r++){
        for(let c = 0; c < cols; c++){
          if(!board[r][c].mine){
            let count = 0;
            for(let i=-1;i<=1;i++){
              for(let j=-1;j<=1;j++){
                let nr = r + i;
                let nc = c + j;
                if(nr>=0 && nr<rows && nc>=0 && nc<cols && board[nr][nc].mine){
                  count++;
                }
              }
            }
            board[r][c].adjacent = count;
          }
        }
      }
    }

    function reveal(r, c){
      const cell = board[r][c];
      if(cell.revealed) return;

      cell.revealed = true;
      cell.element.classList.add('revealed');

      if(cell.mine){
        cell.element.classList.add('mine');
        alert('Fim de jogo! Você acertou uma mina.');
        revealAllMines();
        return;
      }

      if(cell.adjacent > 0){
        cell.element.textContent = cell.adjacent;
      } else {
        // Revelar vizinhos
        for(let i=-1;i<=1;i++){
          for(let j=-1;j<=1;j++){
            let nr = r + i;
            let nc = c + j;
            if(nr>=0 && nr<rows && nc>=0 && nc<cols){
              reveal(nr, nc);
            }
          }
        }
      }

      checkWin();
    }

    function revealAllMines(){
      for(let r = 0; r < rows; r++){
        for(let c = 0; c < cols; c++){
          if(board[r][c].mine){
            board[r][c].element.classList.add('mine');
          }
        }
      }
    }

    function checkWin(){
      let revealedCount = 0;
      for(let r = 0; r < rows; r++){
        for(let c = 0; c < cols; c++){
          if(board[r][c].revealed) revealedCount++;
        }
      }
      if(revealedCount === rows * cols - minesCount){
        alert('Parabéns! Você venceu!');
        revealAllMines();
      }
    }

    resetBtn.addEventListener('click', initBoard);

    initBoard();
  </script>
</body>
</html>
